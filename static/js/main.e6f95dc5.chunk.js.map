{"version":3,"sources":["Cell.js","Row.js","Widget.js","Ticker.js","Grid.js","App.js","reducers/rootReducer.js","index.js","store.js"],"names":["Cell","props","onClick","handleClick","className","val","Row","grid","Array","len","keys","this","map","num","key","offset","e","handleCellClick","vals","React","Component","Widget","Ticker","notImplemented","name","Error","tick","load","getURL","clear","subrender","changeScale","setState","state","_","scaleId","parseInt","target","value","setTimer","timerID","setInterval","interval","timerSet","unsetTimer","clearInterval","toggleTimer","changeInterval","bpm","convertBpmInterval","changeLoadInput","loadInput","renderTempo","toString","onChange","disabled","type","min","max","placeholder","ALL_SCALES","s","idx","a","scale","Grid","widgets","Object","values","forEach","widget","pos","dir","alert","loc","indexOf","query","slice","split","length","loadNewWay","loadOldWay","widgetsToAdd","match","newState","synths","pos0","pos1","_addWidgetInternal","updateVals","DEFAULT_INTERVAL","parsed","_generateSynth","Tone","connect","reverb","feedback","toDestination","newWidgets","JSON","parse","stringify","ctr","newSynths","clickedWidgets","filter","w","flat","handleCollisions","updateWidget","sounded","playSounds","highlightCells","gridsize","initVals","window","location","search","fill","getArrow","synth","didHitWall","makeSound","push","cellsToFlash","i","j","cells","document","getElementsByClassName","id","innerText","setTimeout","last","triggerAttackRelease","keysAndVals","join","groupedWidgetIds","groupBy","x","xs","access","reduce","rv","App","combineReducers","ReactDOM","render","StrictMode","store","initialState","createStore","rootReducer","applyMiddleware","thunk","configureStore","getElementById"],"mappings":"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","file":"static/js/main.e6f95dc5.chunk.js","sourcesContent":["export function Cell(props) {\n  return <td onClick={props.handleClick} className='cell'>{props.val}</td>;\n}","import React from 'react';\nimport { Cell } from './Cell';\nexport class Row extends React.Component {\n  constructor(props) {\n    super(props);\n    this.grid = [...Array(this.props.len).keys()];\n  }\n\n  render() {\n    return (\n      <tr>\n        {\n          this.grid.map(num => {\n            let key = this.props.offset * this.props.len + num;\n            return <Cell handleClick={e => this.props.handleCellClick(e, num, this.props.offset)} key={key} val={this.props.vals[num]} />\n\n          })\n        }\n      </tr>\n    );\n  }\n}\n","export function Widget(props) {\n    return (\n        <div>\n            {/* idx: {props.idx}\n            pos: {props.pos.toString()}\n            dir: {props.dir.toString()} */}\n        </div>\n    );\n}","import React from 'react';\nexport class Ticker extends React.Component {\n    static ALL_SCALES = [\n        {name: \"Otomata\", scale: [\"E3\",\"B3\",\"C4\",\"D4\",\"E4\",\"F#4\",\"G4\",\"B4\",\"D5\"]},\n        {name: \"Aeolian\", scale: [\"E3\",\"A3\",\"B3\",\"C4\",\"D4\",\"E4\",\"F4\",\"G4\",\"A4\"]},\n        {name: \"Ake Bono\", scale: [\"E3\",\"A3\",\"B3\",\"C4\",\"E4\",\"F4\",\"A4\",\"B4\",\"C5\"]},\n        {name: \"Yue-Diao\", scale: [\"E3\",\"B3\",\"D4\",\"E4\",\"G4\",\"A4\",\"B4\",\"D5\",\"E5\"]},\n        {name: \"Bayati\", scale: [\"E3\",\"A3\",\"B3\",\"C4\",\"D4\",\"E4\",\"F4\",\"G4\",\"A4\"]},\n        {name: \"Dorian\", scale: [\"E3\",\"A3\",\"B3\",\"C4\",\"D4\",\"E4\",\"F#4\",\"G4\",\"A4\"]},\n        {name: \"Harmonic minor\", scale: [\"E3\",\"A3\",\"B3\",\"C4\",\"D4\",\"E4\",\"F4\",\"G#4\",\"A4\"]},\n        {name: \"Hijaz\", scale: [\"E3\",\"A3\",\"A#3\",\"C#4\",\"D4\",\"E4\",\"F4\",\"G4\",\"A4\"]},\n        {name: \"Hijaz kar\", scale: [\"E3\",\"A3\",\"A#3\",\"C#4\",\"D4\",\"E4\",\"F4\",\"G#4\",\"A4\"]},\n        {name: \"Huzam\", scale: [\"E3\",\"A3\",\"C4\",\"C#4\",\"D4\",\"E4\",\"F#4\",\"G#4\",\"A4\"]},\n        {name: \"Ionian\", scale: [\"E3\",\"A3\",\"B3\",\"C#4\",\"D4\",\"E4\",\"F#4\",\"G#4\",\"A4\"]},\n        {name: \"Kokin-Choshi\", scale: [\"E3\",\"A3\",\"A#3\",\"D4\",\"E4\",\"G4\",\"A4\",\"A#4\",\"D5\"]},\n        {name: \"Kourd-Atar\", scale: [\"E3\",\"A3\",\"A#3\",\"C4\",\"D#4\",\"E4\",\"F4\",\"G#4\",\"A4\"]},\n        {name: \"Lydian\", scale: [\"E3\",\"A3\",\"B3\",\"C#4\",\"D#4\",\"E4\",\"F#4\",\"G#4\",\"A4\"]},\n        {name: \"Yu-Diao\", scale: [\"E3\",\"A3\",\"C4\",\"D4\",\"E4\",\"G4\",\"A4\",\"C5\",\"D5\"]},\n        {name: \"Neveseri\", scale: [\"E3\",\"A3\",\"A#3\",\"C4\",\"C#4\",\"E4\",\"F4\",\"G4\",\"G#4\"]},\n        {name: \"Niavent\", scale: [\"E3\",\"A3\",\"B3\",\"C4\",\"D#4\",\"E4\",\"F4\",\"G#4\",\"A4\"]},\n        {name: \"Nirz Rast\", scale: [\"E3\",\"A3\",\"B3\",\"C#4\",\"D4\",\"E4\",\"F#4\",\"G4\",\"A4\"]},\n        {name: \"Gong-Diao\", scale: [\"E3\",\"A3\",\"B3\",\"C#4\",\"E4\",\"F#4\",\"A4\",\"B4\",\"C#5\"]},\n        {name: \"Zhi-Diao\", scale: [\"E3\",\"B3\",\"D4\",\"E4\",\"F#4\",\"G#4\",\"B4\",\"C#5\",\"E5\"]},\n        {name: \"Purvi\", scale: [\"E3\",\"A3\",\"A#3\",\"C#4\",\"D#4\",\"E4\",\"F4\",\"G#4\",\"A4\"]},\n        {name: \"Pygmy\", scale: [\"E3\",\"A3\",\"B3\",\"C4\",\"E4\",\"G4\",\"A4\",\"B4\",\"C5\"]},\n        {name: \"Rast\", scale: [\"E3\",\"A3\",\"B3\",\"C#4\",\"D4\",\"E4\",\"F#4\",\"G#4\",\"A4\"]},\n        {name: \"Rumanikos\", scale: [\"E3\",\"A3\",\"B3\",\"C4\",\"D#4\",\"E4\",\"F#4\",\"G4\",\"A4\"]},\n        {name: \"Sabah\", scale: [\"E3\",\"A3\",\"B3\",\"C4\",\"C#4\",\"E4\",\"F4\",\"G4\",\"G#4\"]},\n        {name: \"Segiah\", scale: [\"E3\",\"A3\",\"C4\",\"C#4\",\"D4\",\"E4\",\"F4\",\"G#4\",\"A4\"]},\n        {name: \"Sho\", scale: [\"E3\",\"A3\",\"B3\",\"C4\",\"D4\",\"E4\",\"F#4\",\"A4\",\"B4\"]},\n        {name: \"Blues\", scale: [\"E3\",\"A3\",\"C4\",\"D4\",\"D#4\",\"E4\",\"G4\",\"A4\",\"C5\"]},\n        {name: \"Goonkali\", scale: [\"E3\",\"A3\",\"A#3\",\"D4\",\"E4\",\"F#4\",\"A4\",\"A#4\",\"D5\"]},\n        {name: \"Iwato\", scale: [\"E3\",\"B3\",\"C4\",\"E4\",\"F4\",\"A4\",\"B4\",\"C5\",\"E5\"]},\n        {name: \"Kumoi\", scale: [\"E3\",\"A3\",\"B3\",\"C4\",\"E4\",\"F#4\",\"A4\",\"B4\",\"C5\"]},\n        {name: \"Locrian\", scale: [\"E3\",\"B3\",\"C4\",\"D4\",\"E4\",\"F4\",\"G4\",\"A4\",\"B4\"]},\n        {name: \"Magen Abot\", scale: [\"E3\",\"G#3\",\"A3\",\"B3\",\"C4\",\"D4\",\"E4\",\"G4\",\"G#4\"]},\n        {name: \"Melog\", scale: [\"E3\",\"G#3\",\"A3\",\"B3\",\"D#4\",\"E4\",\"G#4\",\"A4\",\"B4\"]},\n        {name: \"Mixolydian\", scale: [\"E3\",\"A3\",\"B3\",\"C#4\",\"D4\",\"E4\",\"F#4\",\"G4\",\"A4\"]},\n        {name: \"Noh\", scale: [\"E3\",\"A3\",\"B3\",\"D4\",\"E4\",\"F4\",\"F#4\",\"G#4\",\"A4\"]},\n        {name: \"Phrygian\", scale: [\"E3\",\"A3\",\"A#3\",\"C4\",\"D4\",\"E4\",\"F4\",\"G4\",\"A4\"]},\n        {name: \"Pyeong Jo\", scale: [\"E3\",\"B3\",\"C#4\",\"E4\",\"G#4\",\"A4\",\"B4\",\"C#5\",\"E5\"]},\n        {name: \"Shang-Diao\", scale: [\"E3\",\"A3\",\"B3\",\"D4\",\"E4\",\"G4\",\"A4\",\"B4\",\"D5\"]},\n        {name: \"Zokuso\", scale: [\"E3\",\"B3\",\"C4\",\"E4\",\"F4\",\"G4\",\"B4\",\"C5\",\"E5\"]},\n    ];\n\n    notImplemented = (name) => () => {\n        throw new Error(name + \" not implemented\");\n    }\n\n    tick = this.notImplemented(\"tick\");\n    load = this.notImplemented(\"load\");\n    getURL = this.notImplemented(\"getURL\");\n    clear = this.notImplemented(\"clear\");\n    subrender = this.notImplemented(\"subrender\");\n\n    changeScale = (e) => {\n        this.setState((state, _) => ({...state, scaleId: parseInt(e.target.value, 10)}))\n    }\n\n    setTimer = () => {\n        this.timerID = setInterval(\n            () => this.tick(),\n            this.state.interval\n        );\n        this.setState((state, _) =>  ({...state, timerSet: true}));\n      }\n\n    unsetTimer = () => {\n        clearInterval(this.timerID);\n        this.setState((state, _) =>  ({...state, timerSet: false}));\n    }\n\n    toggleTimer = () => {\n        this.state.timerSet ? this.unsetTimer() : this.setTimer();\n    }\n\n    componentWillUnmount() {\n        this.unsetTimer();\n    }\n\n    changeInterval = (e) => {\n        let bpm = parseInt(e.target.value, 10);\n        this.setState({interval:  Ticker.convertBpmInterval(bpm)})\n    }\n\n    static convertBpmInterval(a) {\n        return 30000/a;\n    }\n\n    changeLoadInput = (e) => {\n        this.setState({loadInput: e.target.value})\n    }\n\n    renderTempo = () => parseInt(Ticker.convertBpmInterval(this.state.interval), 10).toString();\n\n    render() {\n        return (\n            <div>\n                {this.subrender()}\n                <div className='controls'>\n                <button onClick={this.toggleTimer}>\n                    {this.state.timerSet ? \"Pause\" : \"Play\"}\n                </button>\n                <span className=\"spacer\"/>\n                <button onClick={this.clear}>Clear</button>\n                <span className=\"spacer\"/>\n                Tempo:&nbsp;\n                <input className=\"bpm\" onChange={this.changeInterval} value={this.renderTempo()} disabled={this.state.timerSet} type=\"number\" min=\"50\" max=\"300\" placeholder={this.renderTempo()}/>\n                <div className=\"urlcontrols\">\n                    <input placeholder=\"earslap URL\" onChange={this.changeLoadInput} value={this.state.loadInput} className=\"loadurl\"></input>&nbsp;<button onClick={this.load}>Load</button>\n                    <span className=\"spacer\"/>\n                    <button onClick={this.getURL}>Get URL</button>\n                </div>\n                <div className=\"scalecontrols\">\n                    Scale:&nbsp;\n                    <select name=\"scale\" value={this.state.scaleId.toString()} className=\"scale\" onChange={this.changeScale}>\n                        {Ticker.ALL_SCALES.map((s, idx) => <option key={idx} value={idx}>{s.name}</option>)}\n                    </select>\n                </div>\n                </div>\n            </div >\n        );\n    }\n}\n","import React from 'react';\nimport { Row } from './Row';\nimport { Widget } from './Widget';\nimport { Ticker } from './Ticker';\nimport * as Tone from 'tone';\n\nexport class Grid extends Ticker {\n  constructor(props) {\n    super(props);\n\n    this.grid = [...Array(this.props.gridsize).keys()];\n    this.reverb = new Tone.Reverb(0.3).toDestination();\n    this.feedback = new Tone.FeedbackDelay(0.3, 0.2).toDestination();\n    this.DEFAULT_INTERVAL = 200;\n\n    this.state = {\n      widgets: {},\n      synths: {},\n      vals: this.initVals(),\n      interval: this.DEFAULT_INTERVAL,\n      ctr: 0,\n      loadInput: window.location.search,\n      scaleId: 0,\n    }\n\n    // TODO this causes tick() to run all the time\n    // document.addEventListener('keydown', event => {\n    //   if (event.code === 'Space') {\n    //     this.toggleTimer();\n    //   }\n    // })\n  }\n\n  componentDidMount() {\n    if (this.state.loadInput) {\n      this.load();\n    }\n  }\n\n  getURL = () => {\n    this.unsetTimer();\n    const bpm = parseInt(Ticker.convertBpmInterval(this.state.interval), 10);\n\n    let widgets = \"\";\n    Object.values(this.state.widgets).forEach(widget => {\n      widgets += (widget.pos[0].toString() + widget.pos[1].toString() + widget.dir.toString());\n    })\n\n    alert(\"https://marwahaha.github.io/otomata/?q=10_\" + this.state.scaleId + \"_\" + bpm + \"_\" + widgets);\n  }\n\n  load = () => {\n    this.unsetTimer();\n    const loc = this.state.loadInput.indexOf(\"?q=\");\n    if (loc !== -1) {\n      const query = this.state.loadInput.slice(loc + 3).split('_');\n      if (query.length === 4) {\n        return this.loadNewWay();\n      } else if (query.length === 1) {\n        return this.loadOldWay();\n      }\n    }\n    alert(\"could not parse URL\");\n    return;\n\n  }\n\n  loadOldWay = () => {\n    // http://www.earslap.com/projectslab/otomata?q=0g636n4q6v1d3v832t\n    this.setState((state, _) => {\n      const lookup = 'qwertyuiopasdfghjklzxcvbnm0123456789';\n      const loc = this.state.loadInput.indexOf(\"?q=\");\n      const widgetsToAdd = state.loadInput.slice(loc + 3).match(/.{2}/g) || []\n\n      let newState = {...state, widgets: {}, synths: {}};\n\n      for (let idx = 0; idx < widgetsToAdd.length; idx++) {\n        const pos0 = parseInt( widgetsToAdd[idx][0], 10);\n        const value = lookup.indexOf(widgetsToAdd[idx][1]);\n        const dir =  value % 4;\n        const pos1 = parseInt((value - dir)/4, 10);\n        newState = this._addWidgetInternal(newState, pos0, pos1, dir);\n      }\n\n      return {...newState, scaleId: 0, timerSet: false, vals: this.updateVals(newState.widgets), interval: this.DEFAULT_INTERVAL};\n    })\n  }\n\n  loadNewWay = () => {\n    // http://earslap.com/projectslab/otomata/?q=10_0_150_862771880062173080\n    this.setState((state, _) => {\n      const loc = state.loadInput.indexOf(\"?q=\");\n      const parsed = state.loadInput.slice(loc).split('_')\n      const scaleId = parseInt(parsed[1], 10);\n      const interval = Ticker.convertBpmInterval(parsed[2]);\n      const widgetsToAdd = parsed[3].match(/.{3}/g) || [];\n\n      let newState = {...state, widgets: {}, synths: {}};\n\n      for (let idx = 0; idx < widgetsToAdd.length; idx++) {\n        const pos0 = parseInt( widgetsToAdd[idx][0], 10);\n        const pos1 = parseInt( widgetsToAdd[idx][1], 10);\n        const dir =  parseInt( widgetsToAdd[idx][2], 10);\n        newState = this._addWidgetInternal(newState, pos0, pos1, dir);\n      }\n\n      return {...newState, scaleId, timerSet: false, vals: this.updateVals(newState.widgets), interval};\n    })\n  }\n\n  _generateSynth = () => new Tone.Synth().connect(this.reverb).connect(this.feedback).toDestination();\n\n  _addWidgetInternal = (state, pos0, pos1, dir=0) => {\n    let newWidgets = JSON.parse(JSON.stringify(state.widgets));\n    newWidgets[state.ctr] = {idx: state.ctr, pos: [pos0, pos1], dir: dir};\n    let newSynths = {...state.synths};\n    newSynths[state.ctr] = this._generateSynth();\n    return { ...state, synths: newSynths, widgets: newWidgets, vals: this.updateVals(newWidgets), ctr: state.ctr + 1 };\n  }\n\n  clear = () => {\n     this.setState((state, _) => ({...state, widgets: {}, synths: {}, vals: this.updateVals({})}));\n  }\n\n  handleCellClick = (e, pos0, pos1) => {\n    this.setState((state, _) => {\n      let clickedWidgets = Object.values(state.widgets).filter(w => w.pos[0] === pos0 && w.pos[1] === pos1).flat();\n      if (clickedWidgets.length === 0) {\n        // Put widget there\n        return this._addWidgetInternal(state, pos0, pos1);\n\n      } else if (clickedWidgets.length === 1) {\n        let idx = clickedWidgets[0].idx;\n        let newWidgets = JSON.parse(JSON.stringify(state.widgets));\n        let dir = newWidgets[idx].dir;\n        if (dir < 3) {\n          // rotate widget\n          newWidgets[idx].dir = (dir + 1) % 4;\n        } else {\n          // delete widget\n          delete newWidgets[idx];\n          delete state.synths[idx];\n        }\n        return { ...state, widgets: newWidgets, vals: this.updateVals(newWidgets) };\n      }\n    });\n  }\n\n  initVals() {\n    return new Array(this.props.gridsize).fill('')\n      .map(_ => new Array(this.props.gridsize).fill(''));\n  }\n\n  static getArrow(pos) {\n    if (pos === 0) {\n      return '↑';\n    } else if (pos === 1) {\n      return '→';\n    } else if (pos === 2) {\n      return '↓';\n    } else {\n      return '←';\n    }\n  }\n\n  updateVals(widgets) {\n    let vals = this.initVals();\n    Object.values(widgets).forEach(w => vals[w.pos[1]][w.pos[0]] += Grid.getArrow(w.dir));\n    return vals;\n  }\n\n  tick = () => {\n    this.setState((state, _) => {\n      let newWidgets = JSON.parse(JSON.stringify(state.widgets));\n      newWidgets = this.handleCollisions(newWidgets);\n      Object.keys(newWidgets).forEach(idx => {\n        newWidgets[idx] = this.updateWidget(newWidgets[idx]);\n      });\n\n      return { ...state, widgets: newWidgets, vals: this.updateVals(newWidgets)};\n    });\n    let sounded = this.playSounds();\n    this.highlightCells(sounded);\n  }\n\n  playSounds() {\n    let sounded = {'cols': [], 'rows': []};\n    Object.keys(this.state.widgets).forEach(idx => {\n      const widget = this.state.widgets[idx];\n      let synth = this.state.synths[idx];\n      if (this.didHitWall(widget.pos, widget.dir)) {\n        this.makeSound(widget.pos, widget.dir, synth);\n        if (widget.dir % 2) {\n          sounded['rows'].push(widget.pos[1]);\n        } else {\n          sounded['cols'].push(widget.pos[0]);\n        }\n      }\n    });\n    return sounded;\n  }\n\n  highlightCells(sounded) {\n    let cellsToFlash = [];\n    for (let i = 0; i < this.props.gridsize; i++) {\n      for (let j=0; j < this.props.gridsize; j++) {\n        if (sounded['rows'].indexOf(i) !== -1  || sounded['cols'].indexOf(j) !== -1) {\n          cellsToFlash.push(i*this.props.gridsize + j);\n        }\n      }\n    }\n    let cells = document.getElementsByClassName(\"cell\");\n    cellsToFlash.forEach(id => {if (!cells[id].innerText) {cells[id].className = 'cell flashing'}});\n    setTimeout(() => cellsToFlash.forEach(id => {if (!cells[id].innerText) {cells[id].className = 'cell'}}), 50);\n  }\n\n  didHitWall(pos, dir) {\n    const last = this.props.gridsize - 1;\n    return (dir === 0 && pos[1] === 0)\n      || (dir === 1 && pos[0] === last)\n      || (dir === 2 && pos[1] === last)\n      || (dir === 3 && pos[0] === 0);\n  }\n\n  makeSound(pos, dir, synth) {\n    let val = 0;\n    const last = this.props.gridsize - 1;\n    // TODO demystify this code\n    if ((dir % 2 === 1) && (pos[0] === 0 || pos[0] === last)) {\n      val = last - pos[1];\n    } else {\n      val = pos[0];\n    }\n    const scale = Ticker.ALL_SCALES[this.state.scaleId].scale;\n    synth.triggerAttackRelease(scale[val % scale.length], \"8n\", Tone.now(), 0.3);\n  }\n\n  updateWidget(widget) {\n    // if this will hit the wall, reverse\n    if (this.didHitWall(widget.pos, widget.dir)) {\n      widget.dir = (widget.dir + 2) % 4;\n    }\n\n    if (widget.dir === 2) {\n      widget.pos = [widget.pos[0], (widget.pos[1] + 1 + this.props.gridsize) % this.props.gridsize]\n    } else if (widget.dir === 0) {\n      widget.pos = [widget.pos[0], (widget.pos[1] - 1 + this.props.gridsize) % this.props.gridsize]\n    } else if (widget.dir === 1) {\n      widget.pos = [(widget.pos[0] + 1 + this.props.gridsize) % this.props.gridsize, widget.pos[1]];\n    } else {\n      widget.pos = [(widget.pos[0] - 1 + this.props.gridsize) % this.props.gridsize, widget.pos[1]];\n    }\n\n    return widget;\n  }\n\n  handleCollisions(widgets) {\n    const keysAndVals = Object.values(widgets)\n      .map(w => [w.idx, w.pos.join(',')]);\n\n    const groupedWidgetIds = Object.values(this.groupBy(keysAndVals, 1, 0));\n    groupedWidgetIds.filter(x => x.length > 2).flat().forEach(id => {\n      // 3 or more, just reverse direction\n      widgets[id].dir = (widgets[id].dir + 2) % 4;\n    });\n    groupedWidgetIds.filter(x => x.length === 2).flat().forEach(id => {\n      // 2, rotate\n      widgets[id].dir = (widgets[id].dir + 1) % 4;\n    });\n    return widgets;\n  }\n\n  groupBy(xs, key, access) {\n    return xs.reduce(function (rv, x) {\n      (rv[x[key]] = rv[x[key]] || []).push(x[access]);\n      return rv;\n    }, {});\n  };\n\n  subrender = () => {\n    return (\n      <div>\n        <table>\n          <tbody>\n            {\n              this.grid.map(num => {\n                return <Row handleCellClick={this.handleCellClick}\n                  offset={num} key={num} vals={this.state.vals[num]} len={this.props.gridsize} />\n              })\n            }\n          </tbody>\n        </table>\n        <br />\n        {\n          Object.values(this.state.widgets).map(w => {\n            return <Widget\n              idx={w.idx}\n              key={w.idx}\n              dir={w.dir}\n              pos={w.pos}\n            />\n          })\n        }\n      </div>\n    );\n  }\n}\n","import './App.css';\nimport { Grid } from './Grid';\nimport { connect } from 'react-redux';\nimport { Component } from 'react';\n\nconst mapStateToProps = state => ({\n  ...state\n})\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <Grid\n          gridsize={9}\n        />\n      </div >\n    )\n  }\n}\n\nexport default connect(mapStateToProps)(App);\n","import { combineReducers } from 'redux';\nexport default combineReducers({\n});","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n// import reportWebVitals from './reportWebVitals';\nimport { Provider } from 'react-redux'\nimport configureStore from './store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={configureStore()}>\n      <App />\n    </Provider>\n  </React.StrictMode >,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n","import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from './reducers/rootReducer';\nexport default function configureStore(initialState = {}) {\n    return createStore(\n        rootReducer,\n        initialState,\n        applyMiddleware(thunk)\n    );\n}"],"sourceRoot":""}